---
category:
  - Tech
tags:
  - TCPIP
status: Done
---
NAT（Network Address Translation，网络地址转换）是一种将私有网络中的IP地址转换为公共网络（如互联网）IP地址的技术。它的功能有：

1. **IP 地址转换**：
   - 内部网络通常使用**私有 IP 地址**，这些地址在互联网上是无效的，无法直接与公网通信。
   - NAT 会将内部设备的私有 IP 地址**转换为公共 IP 地址**，使得本地设备可以通过网关与外部网络通信。这样，多个内部设备可以共享一个或少量的公共 IP 地址来访问互联网。

2. **节省 IP 地址**：
   - 使用 NAT 的网关可以让大量内部设备通过一个或多个公共 IP 地址访问互联网。这样不仅节省了 IPv4 公共地址，还提高了地址的利用效率。

3. **安全性**：
   - NAT 还提供了一层隐蔽性：外部的设备无法直接看到或访问内部设备的私有 IP 地址，因为网关在进行转换时隐藏了私有 IP 地址。这为内部网络提供了额外的安全保护，减少了来自公网的直接攻击风险。

**NAT的类型**
1. **静态NAT（Static NAT）**：将私有IP地址映射到一个特定的公共IP地址，适用于内网中的服务器等需要被外部访问的设备。
   
2. **动态NAT（Dynamic NAT）**：从一组公共IP地址池中分配一个IP地址给内网设备，映射是动态的，不固定。

3. **端口地址转换（PAT，Port Address Translation）或NAT Overload**：最常见的一种NAT形式，它通过使用不同的端口号来允许多个私有IP地址共享一个公共IP地址。这种方式广泛用于家庭路由器和小型企业中。

**工作原理**
当内网中的设备发送数据包到外网时，NAT会将设备的私有IP地址转换为公共IP地址，同时记录这个映射。返回的数据包到达时，NAT会根据映射将公共IP地址转换回相应的私有IP地址，将数据包正确地传递给内网中的设备。
