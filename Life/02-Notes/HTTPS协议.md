---
category:
  - Tech
tags:
  - TCPIP
status: Done
---



- HTTPS协议在HTTP协议的基础上加上了SSL/TLS协议加密层，对数据进行加密保证数据的安全
- SSL/TSL证书是数字证书的一种，由受信任的数字证书颁发机构（简称CA）颁发，数字证书包含.csr证书签名请求文件内容和CA的数字签名（用CA自己的私钥对内容的信息摘要进行签名）
- HTTPS的安全性基于TSL，而TSL的安全性基于CA机构背书在的数字证书
- TSL如何确保服务端的合法性：客户端向服务端请求证书，服务端返回证书，
  1. 客户端用CA机构一样的信息摘要算法计算返回证书中.scr证书签名请求文件内容得到返回信息摘要
  2. 客户端用CA机构的公钥去解密返回证书中的CA数字签名得到签名信息摘要，
  3. 比较这俩个摘要是否相同即可判断证书的有效性
  4. 服务端如果要验证客户端的合法性也是一样的方式
- TSL如何实现数据的加密传输：**利用非对称性加密协商对称加密密钥对之后的通信数据使用对称加密传输**
  1. 客服端向服务端请求证书并发送随机字符串R1
  2. 服务端向客户端响应请求发送证书和随机字符串R2
  3. 客户端验证用证书的有效性之后再用服务端的公钥加密一段随机字符串R3发送给客户端
  4. 服务端收到加密的R3字符串用自己的私钥解密得到R3明文
  5. R1、R2、R3组成之后通信的对称密钥
  6. 这整个过程中确保了服务端的合法性，因为通过非对称加密协商对称加密密钥，整个过程对称加密密钥没有经过网络传输，只有客户端和服务端本地知道，所以理论上对称加密密钥是没有泄漏的，没有泄漏既通信安全
- 摘要保证数据的完整性，不能保证数据的合法性
- 证书的合法性保证整个服务的合法性
- 数据在互联网传输中被截取是不可避免的，安全性的一大要点是数据被破译的难度

### 一、HTTPS

HTTPS 协议是为了保证数据传输的安全而生，它使用默认==端口443==，但它其实并不是一个全新的协议，而是HTTP 协议基本之上再加上SSL/TLS 协议。因此当你访问一个支持 https 的网站时，是需要先进行 SSL/TLS 握手建立连接的。

SSL/TLS 握手的目的是为了安全地协商（使用非对称加密进行密钥的协商）出一份对称加密的密钥，有了这个密钥之后，后续的数据全部使用这个密钥进行加密。

### 二、SSL/TSL

![[TSLSSL协议#前言]]

### 三、HTTPS请求过程

https如何保证服务器的合法性、数据的完整性、数据的安全性？
![[TSLSSL协议#2、握手过程]]


### 四、单双向认证

在上面的例子中，客户端请求服务端获取证书信息进行认证，这个就是单向认证，只是客户端认证服务端，但是服务端并没有认证客户端的请求。HTTPS支持单向认证，也支持双向认证。

双向认证的情况通常比较少见，常见于银行等领域，就像我们以前使用银行的U盾，这就是一种双向认证案例，还有就是在电脑上安装支付宝的证书等；双向认证比单向认证更加安全，但是需要对每一个客户端都进行分配证书。

### 参考

- [HTTPS如何保证数据安全](https://zhuanlan.zhihu.com/p/578936926)

- [数字证书、签名](https://www.51cto.com/article/628890.html)



