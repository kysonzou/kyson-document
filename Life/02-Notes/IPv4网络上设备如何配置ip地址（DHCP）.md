---
category:
  - Tech
tags:
  - TCPIP
status: Done
---
在IPv4网络上，设备的发现和IP地址的配置通常涉及以下两种主要方法：

**1. 静态IP地址配置**

设备可以手动配置静态IP地址。网络管理员在设备的网络设置中手动输入IP地址、子网掩码、默认网关和DNS服务器地址。这种方法适用于需要固定IP地址的设备，比如服务器或打印机。

**2. 动态主机配置协议 (DHCP)**

DHCP（Dynamic Host Configuration Protocol）是最常用的自动配置方法，通过以下步骤进行：

1. **DHCP Discover（发现阶段）**：设备首次连接网络时，会发送一个广播消息（DHCP Discover）到网络，目标地址是255.255.255.255，以查找可用的DHCP服务器。

2. **DHCP Offer（提供阶段）**：网络上的DHCP服务器接收到发现请求后，会回复一个DHCP Offer消息，其中包含可用的IP地址、子网掩码、网关、租约时间等信息。

3. **DHCP Request（请求阶段）**：设备从收到的DHCP Offer中选择一个并发送DHCP Request消息，向服务器请求使用该IP地址。

4. **DHCP Acknowledgement（确认阶段）**：DHCP服务器接收请求后，发送一个DHCP ACK消息，确认IP地址的分配，并提供其他必要的网络配置参数。设备在收到这个消息后，将开始使用所分配的IP地址进行通信。

**附加说明**

- **ARP协议**：在分配IP地址之前，设备可能会发送ARP（地址解析协议）请求，确保该地址未被网络中其他设备使用。

- **DHCP租约更新**：当IP地址租期接近到期时，设备会向DHCP服务器发送请求以续租地址。如果服务器批准，租期会被延长。

这种自动IP地址分配方式减少了手动配置的工作量，并有效管理了IP地址的分配和回收。