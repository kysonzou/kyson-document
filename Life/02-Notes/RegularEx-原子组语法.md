---
category:
  - Tech
tags:
  - RegularE
status: Done
---
**原子组**（Atomic Group）是正则表达式中的一种机制，它使得模式在某个匹配路径失败后，不允许回溯到组内的其他可能匹配。这种特性使得正则表达式的匹配过程更具确定性，从而减少回溯，提高匹配效率。

**原子组的语法**

- 在正则表达式中，原子组的语法是使用 (?>pattern)，其中 pattern 表示需要匹配的正则模式。

```regex
(?>pattern)
```
  
**原子组的工作原理**

与普通分组 `()` 不同，原子组会**锁定匹配路径**。一旦进入原子组并匹配了字符，如果接下来的匹配失败，正则引擎不会回到原子组内重新尝试。也就是说，原子组内部的匹配路径一旦确定，不允许再回溯。

**示例对比：普通分组 vs 原子组**

假设我们希望匹配连续的 “a” 字符后跟一个 “b”，以下是普通分组和原子组的对比示例。

**使用普通分组**

正则表达式：(a+)?b

匹配字符串：aaaac

- **过程**：普通分组 (a+)? 会匹配尽可能多的 “a”，直到匹配到最后一个 “c”。此时因为没有 “b” 字符，正则引擎会回溯，将最后一个 “a” 从匹配中移出，然后尝试匹配剩余的字符串。

- **结果**：最终匹配失败。

**使用原子组**

正则表达式：(?>a+)?b

匹配字符串：aaaac

- **过程**：原子组 (?>a+) 匹配到连续的 “a” 字符，锁定整个匹配路径，后续不再回溯。一旦接下来的 “b” 匹配失败，正则引擎不会返回原子组内部重新尝试。

- **结果**：匹配失败，并且避免了回溯。

**原子组的优点**

- **提高性能**：在复杂表达式中，原子组可以减少回溯，从而提高匹配速度。

- **减少回溯爆炸**：原子组能有效地防止回溯爆炸问题，使得表达式在处理复杂或长字符串时更加高效。
