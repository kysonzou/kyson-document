---
category:
  - Tech
tags:
  - Git
status: Done
---
Git 的强大在于其灵活的多维度管理。要理解其运作，关键在于弄清楚“身份认证”、“仓库上下文”以及“分支的本地与远程关联”这三个核心环节是如何协同工作的。

**1. 身份管理：区分“我是谁”与“我能访问哪里”**

- **提交者身份 (`user.name` & `user.email`)**:
    
    - **目的**: 标记代码是谁写的，用于提交历史记录。通过 `git config --global user.name "名字"` 设置。
    - **作用域**: 这个配置有 `--local`（当前仓库）、`--global`（当前用户）、`--system`（系统所有用户）三个级别，互不冲突，优先级依次降低。
    - **核心**: **此身份不用于验证你对远程仓库的访问权限。**
- **远程仓库认证 (HTTPS/SSH凭证)**:
    
    - **目的**: 当你与远程服务器（如GitHub）交互（`clone`, `push`, `pull`）时，服务器需要验证你的访问权限。
    - **方式**:
        - **HTTPS**: 使用用户名和**个人访问令牌 (PAT)**（推荐，比密码更安全）。Git凭证助手 (Credential Helper) 会帮助记住这些，避免重复输入。
        - **SSH**: 使用SSH密钥对。公钥上传到服务器，私钥本地保留。`ssh-agent` 可管理私钥密码。
    - **核心**: 这是你访问**特定远程仓库**的“通行证”。与你的提交者身份是两套独立的系统。

**2. 仓库管理：本地工作台的独立性与远程连接**

- **关键点：Git命令的上下文由你当前所在的目录决定。**
    
    - 当你 `cd` 进入一个包含 `.git` 子目录的项目文件夹时，所有后续的 Git 命令都将作用于**这个特定的本地仓库**。
- **本地仓库 (`.git` 目录)**:
    
    - 包含项目的完整历史、所有本地分支以及**针对该仓库的特定配置**（存储在 `.git/config` 文件中）。
    - **独立配置**: 每个本地仓库的 `.git/config` 可以定义：
        - **远程连接 (`remote`)**: 记录了此本地仓库关联的远程仓库地址和别名（如 `origin` 指向 `https://github.com/user/repo.git`）。一个本地仓库可以关联多个远程仓库。
        - **分支跟踪 (`branch.<branch-name>.remote`, `branch.<branch-name>.merge`)**: 定义了某个本地分支应该与哪个远程仓库的哪个远程分支进行同步。
- **切换工作项目**: 当你 `cd` 到另一个项目（另一个本地仓库）时，Git 的整个上下文（包括它将读取的 `.git/config`，当前分支，可用的远程等）都会相应切换。项目之间是隔离的。
    

**3. 分支管理：本地开发与远程同步的桥梁**

- **本地分支**:
    
    - 你在本地仓库中直接创建和工作的分支（如 `feature/new-login`）。
    - 操作（创建、切换、合并）主要影响本地，在 `push` 之前对他人不可见。
- **远程跟踪分支 (`origin/main`, `origin/feature/new-login`)**:
    
    - 这些是你本地仓库中对远程分支状态的“只读指针”或“快照”。
    - 通过 `git fetch <remote-name>` 从远程服务器更新，让你了解远程的最新进展。
- **建立本地与远程分支的“跟踪关系”**:
    
    - **目的**: 使得 `git pull` 和 `git push` 操作更便捷，Git知道默认与哪个远程分支同步。
    - **方式**: 通常在第一次推送本地新分支时使用 `git push -u origin feature/new-login` 来建立。
        - `-u` (或 `--set-upstream`) 选项会在当前本地仓库的 `.git/config` 中记录下这种跟踪关系。
    - **效果**: 之后在该本地分支上，可以直接使用 `git pull` (从跟踪的远程分支拉取) 和 `git push` (推送到跟踪的远程分支)。`git status` 也会显示本地分支相对于其上游分支的状态。

**核心逻辑串联：**

1. 你使用**特定凭证**（HTTPS PAT 或 SSH密钥）从远程克隆或连接到一个仓库，这验证了你对该**远程资源**的访问权限。
2. Git 操作的**上下文**由你当前终端所在的**本地仓库目录**决定。
3. 该本地仓库的 `.git/config` 文件中定义了它认识的**远程仓库别名和URL**，以及哪些**本地分支**正在跟踪哪些**远程分支**。
4. 当你提交代码时，会使用你在 Git 配置中设定的**提交者身份** (`user.name/email`)。
5. 当你与远程仓库同步（`push/pull`）时，Git 会根据当前本地分支的跟踪设置（或你的显式命令）与相应的远程分支交互，并再次使用你的**远程访问凭证**进行认证。

通过这种方式，Git 清晰地区分了“谁写的代码”、“代码存储在哪里（本地与远程）”、“代码的不同版本线（分支）”以及“谁有权访问远程代码”，并允许这些元素在不同的项目（本地仓库目录）间独立管理和切换。
