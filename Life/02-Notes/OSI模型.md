---
category:
- Tech
tags:
- Network
status: Done
---
**OSI模型（开放系统互联模型，Open Systems Interconnection Model）** 是一种概念性框架，用于理解计算机网络中不同通信协议和技术如何相互交互。它由**国际标准化组织（ISO）** 在1984年提出，目的是为网络通信提供标准化的分层模型，以便简化网络设计和实现。

**OSI模型**是理论性和抽象的框架，帮助我们理解网络协议如何分层管理，并且给出了一种理想化的网络通信模型。

### OSI七层模型

OSI模型将网络通信过程分为**七个层次**，每个层次有其独特的功能和任务，每一层的输出都会成为上一层的输入，它们协同工作以实现端到端的通信。

>以OSI的七层模型作为理论参考，设计出了常用的**TCP/IP协议栈**、**蓝牙协议栈**、**Zigbee协议栈**等通信框架来满足各种使用需求
#### 物理层

- Physical Layer
- 物理层主要负责网络设备间的**物理连接和信号传输**
- 传输比特流（bit)，010101 
- 传输介质：网线、光纤、电磁波等。
- 常见技术：以太网、WIFI、蓝牙、Zigbee，它们会定义各自信号的编码、频率、传输介质等。

> [!note]- 物理层的定义
> OSI模型中的**物理层**（Physical Layer）是网络通信的第1层，负责在网络设备之间传输原始的比特流，即物理信号的传递。物理层的主要功能和特性包括：
> 
> 1. **物理传输介质**
>     - 定义设备之间的连接方式，包括电缆（如双绞线、光纤）、无线电波、红外线等不同的物理传输介质。
>     
> 2. **信号编码**
>     - 将比特数据（0和1）转换成物理信号（如电压或光脉冲），并控制信号的波形和特征。
>     
> 3. **传输模式**
>    确定信号的传输方向，比如单工、半双工和全双工模式。
>     - **单工**：信号只能单向传输，例如广播电台。
>     - **半双工**：信号可以双向传输，但不能同时进行，比如对讲机。
>     - **全双工**：信号可以同时双向传输，例如电话。
>
> 4. **速率和距离**
>     - 定义传输的速率（比特率）和最大传输距离，确保信号在传输过程中保持完整性。
>     
> 5. **物理拓扑结构**
>     - 确定网络设备的物理连接方式，比如总线型、星型、环型、网状等拓扑结构。
>    
> 物理层不涉及数据的内容（如协议或帧格式），仅关注信号传输和介质。因此，物理层是其他网络层的基础，确保设备间的通信通道畅通，使数据能够在后续层中进行处理和传输。

#### 数据链路层

- Data Link Layer
- 解决设备-设备之间的通信，处理帧的格式化、寻址、错误检测和流量控制
- 添Mac地址信息...，将数据封装成比特帧，然后通过物理介质传输到下一台设备
- 常见技术：以太网、WIFI、蓝牙、Zigbee，它们会定义各自帧的格式和传输控制。
- 常见设备：以太网交换机（负责数据的转发），以太网网卡（负责设备数据的传输和接收）

>[!Note]- 数据链路层定义
>OSI模型中的**数据链路层**（Data Link Layer）是网络通信的第2层，负责在同一物理网络中的相邻节点之间可靠地传输数据帧，并进行错误检测和纠正。数据链路层在发送端将数据封装成帧，在接收端解封装并检查传输完整性。它的主要功能和特性包括：
>
>1. **帧封装和解封装**
>    - 将上层数据封装成帧，包括添加源和目的MAC地址等头信息，在接收端解封装帧，提取出上层数据。
>
>2. **地址寻址**
>    - 数据链路层使用**MAC地址**（物理地址）来标识网络设备，以便在同一局域网络内传递帧。MAC地址通常由网卡制造商赋予，确保唯一性。
>
>3. **错误检测与纠错**
>    - 在帧头部添加校验码（如循环冗余校验CRC）以检测传输中的错误，有些协议可提供简单的纠错功能。若检测到错误，帧可被丢弃或请求重新传输。
>
>4. **流量控制**
>    - 管理数据流的速度，防止发送方传输速度过快而导致接收方处理不过来。这能确保帧传输的稳定性，避免丢帧或拥塞。
>
>5. **访问控制**
>    - 控制多个设备共享同一物理链路的访问权限。数据链路层使用访问控制协议（如CSMA/CD、CSMA/CA）来协调设备访问，防止冲突。
>
>6. **逻辑链路控制（LLC）和介质访问控制（MAC）子层**
>    数据链路层进一步分为两个子层：
>
 >    - **LLC子层**：负责流量控制和错误处理，并与网络层交互。
>     - **MAC子层**：负责访问控制，确定设备如何共享和访问物理链路资源。
>
  >在数据链路层，**交换机**等设备使用MAC地址在同一局域网中转发数据，确保数据帧能够在网络中的相邻节点之间准确到达。

#### 网络层

- Network Layer
- 解决不同网络之间的通信，通过路由确定最佳的转发策略。
- 添加源IP、目标IP...，将数据封装成IP数据包，交给数据链路层处理
- 常见协议有：TCPIP协议栈中的IP协议、ICMP协议、ARP寻址协议

>[!Note]- 网络层定义
>网络层（Network Layer）是计算机网络中的一层，位于OSI（开放式系统互连参考模型）模型的第三层。它的主要任务是在不同网络之间提供数据包的路由、转发和交付服务，以确保数据从源主机传输到目标主机，并且可以跨越不同的网络。
>
>以下是网络层的一些主要功能和特点：
>
>1. **数据包路由** 
>        - 网络层根据目标地址（通常是IP地址）来决定如何将数据包从源主机传输到目标主机。它维护路由表，这些表用于确定数据包的下一跳路由器或网关。
>
>2. **跨网络通信** 
>        - 网络层允许不同的物理网络相互连接，使数据可以在这些网络之间传输。它提供了一种抽象的、独立于物理网络的方式来进行通信。
>
>3. **分组交换** 
>     - 在网络层，数据通常被分成较小的数据包，这些数据包可以独立传输，并且可以采用不同的路径到达目标。这种分组交换的方式允许更有效地利用网络资源。
>
>4. **逻辑地址** 
 >    - 网络层使用逻辑地址（通常是IP地址）来标识主机和设备，而不是物理地址（如MAC地址）。这使得主机可以在不同网络中移动而无需更改其地址。
>
>5. **数据包转发**
>     - 网络层负责在路由器和交换机之间进行数据包转发。路由器根据目标地址决定将数据包发送到哪个接口，以便它能够沿着正确的路径到达目标主机。
>
>6. **错误处理：** 
>        - 网络层可以处理一些网络层的错误，例如目标不可达、数据包丢失等，并根据需要发送错误消息。
>
>7. **网络协议** 
>        - 最常见的网络层协议是Internet协议（IP），它是互联网的基础协议。IPv4和IPv6是两个广泛使用的IP协议版本。
>
>总之，网络层在计算机网络中起到关键作用，它为不同主机和网络之间的通信提供了路由和转发服务。通过逻辑地址，它允许数据包在网络之间自由传输，确保数据的可达性和可靠性。不同的网络层协议和技术可以用来满足不同网络需求，而IP是最常用的网络层协议之一。

#### 传输层

- Transport Layer
- 解决端到端的数据传输，提供可靠数据传输服务、控制数据流量、错误检测和纠正、超时重传、拥塞控制等
- 添加源端口号、目标端口号...，将数据封装成数据段（Segement），交给网络层处理。
- socket：通用的网络编程思想和标准，它使得应用程序可以与传输层协议无关地进行开发。
- 常见协议有：TCPIP协议栈中的TCP、UDP
- 安全增强协议：SSL/TLS（通用安全传输层协议）

> [!note]- 传输层定义
> 传输层（Transport Layer）是OSI模型的第四层，它的主要功能是负责端到端的数据传输和流量控制。传输层位于网络层之上、会话层之下，是网络通信中非常关键的一层，因为它为不同的应用进程提供可靠的数据传输。
> 
> 传输层的核心功能
> 
> 1.	数据传输可靠性：
> 	-	传输层的主要任务之一是确保数据从源端正确到达目标端，并尽可能减少丢包和错误。传输层通过数据校验、确认、重传等机制来实现数据传输的可靠性。
> 2.	端到端连接管理：
> 	-	传输层建立并管理两台设备之间的端到端连接。它通过握手过程确保通信双方都准备好进行数据传输，例如在TCP中使用三次握手来建立连接，四次握手来断开连接。
> 3.	流量控制：
> 	-	传输层负责调节数据流的速率，以确保发送方不会因速率过高而导致接收方超载。TCP通过窗口大小（Window Size）等机制来动态调整传输速度。
> 4.	数据分段与重组：
> 	-	传输层将数据分成较小的片段（称为“段”或“包”）进行传输，然后在接收方重组成原始数据。这种分段机制使得大数据能够在网络中有效传输并重组。
> 5.	差错检测和纠正：
> 	-	传输层能够检测并纠正数据传输过程中发生的错误，通过校验和等技术确保数据的完整性。
> 6.	多路复用和解复用：
> 	-	传输层支持多路复用，即在同一网络连接上同时传输多个应用的数据流（如网页浏览、文件下载、邮件收发等）。通过端口号，传输层能够区分和管理不同应用的数据流。
> 
> 传输层的主要协议 
>
> 传输层使用不同的协议来满足各种网络应用的需求，主要包括：
>
> 1. 传输控制协议（TCP，Transmission Control Protocol）：
>     - TCP是一种面向连接的协议，提供可靠的数据传输，适用于需要高可靠性的数据传输场景，如文件传输、电子邮件等。
> 2. 用户数据报协议（UDP，User Datagram Protocol）：
>     - UDP是一种无连接协议，数据传输不经过握手，适用于不需要严格保证数据可靠性、但要求传输速度快的应用场景，如视频流、语音通话、在线游戏等。
> 
>  传输层的作用总结
> 
>  传输层的核心目标是让通信双方能够在网络中可靠地传输数据，确保数据的完整性、准确性以及传输的高效性。通过选择适合的传输协议，传输层在网络应用之间架起了数据传输的桥梁。

#### 会话层

- Session Layer
- 解决应用服务到应用服务的通信，管理和维护通信会话（sessions）
- 「负责建立和断开通信连接」，何时建立，断开连接以及保持多久的连接

> [!note]- 会话层定义
> 会话层（Session Layer）是OSI模型的第5层，负责在通信设备之间建立、管理和终止会话（Session）。它为应用程序之间的会话提供了逻辑连接，使得应用程序能够在网络上传输数据时有效地管理和同步对话的开始、进行、恢复和结束。
> 
> 在会话层中，核心功能包括：
> 1.	会话管理
>        - 负责在通信双方之间建立和维护会话。会话可以理解为两个设备之间的连接或对话，在会话层建立的连接为应用层提供可靠的基础。
> 2.	数据同步
>     - 通过检查点和恢复机制来确保数据的有序传输。如果网络传输中断，会话层可以通过先前的检查点从中断处恢复通信，而不必从头开始。
> 3.	会话控制
>     - 管理单工（单向）、半双工（两方交替传输）和全双工（两方同时传输）通信方式，使通信能够根据需求进行方向上的调整。
> 
> 会话层虽然在OSI模型中独立定义，但在实际应用中，它的许多功能通常由应用层协议（如HTTP、FTP）或传输层协议（如TCP）来实现。在现代网络中，会话层并不作为单独的层被明显实现，而是被整合进应用程序的功能中，例如在远程过程调用（RPC）或流媒体应用中，负责建立和维护会话的过程就是会话层的一种表现。

#### 表示层

- Presentation Layer
- 处理数据的表示、转换、加密、解密、压缩、编码等，以确保在不同系统之间的通信中，数据能够正确的解释和呈现
- 常见应用：字符编码相关的ASCII、UTF-8、UTF-16，SSL/TLS的加密解密

> [!note]- 表示层定义
> OSI模型中的表示层（第六层）主要负责数据格式的转换和处理，确保发送方和接收方应用层之间的数据能够正确解读。表示层可以将数据从一种格式转换为另一种格式，以适应不同系统或应用的需求。它在数据的编码、压缩和加密方面扮演重要角色。
> 
> 表示层的核心功能
> 
> 1.	数据格式化
>     - 将数据从一种格式（如文本、图片、视频）转换为另一种格式。比如，字符编码转换（ASCII、EBCDIC等）。
> 2.	数据加密和解密
>     - 在数据传输前对数据进行加密，确保数据在传输过程中不被窃听；接收方收到数据后解密，以便读取。
> 3.	数据压缩和解压缩
>     - 对大文件进行压缩以减少带宽占用，提高传输效率；接收方在数据传输后解压以还原原始数据。
>
> 举例
> 
> - 图像传输
>     - 发送方的应用层可能将一张图片格式化为JPEG格式，表示层负责将其转为适合传输的格式，接收方的表示层再将数据还原成JPEG格式。
> - 字符编码
>     - 当使用不同编码方式的设备（例如一个使用UTF-8，一个使用ASCII）互相通信时，表示层可以进行编码转换，确保数据正确呈现。
> - SSL/TLS加密
>     - 在Web浏览器与服务器之间进行HTTPS通信时，表示层负责数据的加密和解密工作。
> 
> 表示层的作用虽不直接涉及网络数据传输的路由或传输控制，但它确保了数据在不同系统和应用间的一致性和安全性。

#### 应用层

- Application Layer
- 提供了用户与计算机网络交互的界面
- 常见的网络服务和协议：
    - 文件传输协议（FTP）
    - 网页浏览协议（HTTP、HTTPS）
    - 远程登录（SSH、Telnet）
    - 域名系统（DNS）
    - 电子邮件传输协议（SMTP）
    - 电子邮件接收协议（POP3和IMAP）]]

> [!note]+ 应用层定义
> OSI模型中的应用层（第七层）是网络模型的最顶层，直接与最终用户和应用程序交互。应用层负责提供用户可以直接使用的网络服务，如电子邮件、文件传输、网页浏览等，确保应用程序能够通过网络实现数据交换。它提供接口，让用户的应用能够访问网络资源和服务。
> 
> 应用层的核心功能
> 
> 1.	支持网络服务
>     - 包括HTTP（用于网页访问）、FTP（用于文件传输）、SMTP/POP3（用于电子邮件传输）、DNS（域名解析）、SNMP（网络管理协议）等。
> 2.	管理通信进程
>     - 提供会话管理、数据传输请求的启动和终止等功能，确保通信过程顺畅进行。
> 3.	识别资源和地址
>     - 帮助应用程序找到网络资源，如通过DNS将域名解析成IP地址。
> 
> 举例
> - 浏览网页：当用户访问网站时，应用层的HTTP协议将负责传输网页数据。
> - 文件传输：FTP协议在应用层帮助用户上传或下载文件。
> - 电子邮件：SMTP和POP3协议在应用层用于发送和接收电子邮件。
> - 域名解析：DNS协议将用户输入的域名转换成相应的IP地址。
> 
> 其他说明
> 
> 应用层本身不负责数据传输的底层细节，它依赖于底层各层完成具体的传输任务。应用层的主要职责是确保数据能在应用程序之间以正确的格式、可靠的方式传送，以支持各种网络应用。

#### 总结

- 发送端是由上至下，把上层来的数据在头部加上各层协议的数据（部首）再下发给下层。
- 接受端则由下而上，把从下层接受到的数据进行解密和去掉头部的部首后再发送给上层。
- 层层加密和解密后，应用层最终拿到了需要的数据。

TCP/IP协议栈实现示意图
![[OSI模型示意图.png]]

四层传输层数据被称作 **「段」**（Segments）；

三层网络层数据被称做 **「包」**（Packages）；

二层数据链路层时数据被称为 **「帧」**（Frames）；

一层物理层时数据被称为 **「比特流」**（Bits）。




